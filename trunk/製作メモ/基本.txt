[tiny-robotic-wizard]製作メモ

●表層的な仕様
	ものづくり教室で製作するロボットのプログラミング環境を製作する．
	
	基本思想はイベント駆動型プログラミング．
	ロボットのセンサの状態が変化すると，イベントが発生するようになっている．
	ユーザはそのイベントに対応する動作を指定することでプログラミングを行う．
	イベントはセンサの状態の場合の数だけある．
	
	メインウィンドウにイベントと動作の一覧を編集可能な状態で表示する．
	動作はデフォルトでは"なにもしない"にしておく．
	ユーザはこのウィンドウでプログラミングする．
	
	コンピュータ操作に慣れないユーザのためにWizardも用意する．
	各イベントに対する動作をWizard形式でユーザに聞いていく．
	
	Wizardの流れは次のようになる．
	
	(1) 概要を説明する．
	(2) 次の選択肢を表示する．
	    (a) プログラムを新規作成する→ステップ(3)へ進む．
	    (b) 既存のものを読み込む→ファイル選択ダイアログを表示．ステップ(6)へ進む．
	(3) プログラミングの難易度を設定するための質問をする．
	(4) 難易度に応じて，使用するセンサの数とセンサの分解能を設定する．→イベントの数によって難易度を調整する．
	(5) すべてのイベントについて動作を聞く．
	(6) 次の選択肢を表示する．
	    (a) プログラムを保存する．→ファイル選択ダイアログを表示．ステップ(6)に戻る．
	    (b) プログラムを再確認する．→Wizardの結果をメインウィンドウに反映してWizardを終了．
	    (c) ロボットに転送する．→ロボットの接続方法を案内する．[転送]ボタンを表示．
	        転送成功ならステップ(6)へ．失敗ならその旨を表示してステップ(6)(c)へ．
	(7) Wizard終了のお知らせを表示

●技術的な仕様
	開発環境は"Visual C# 2008"，動作環境は".NET Framework 2.0"．
	対象となるロボットのMCUは"AVR"，"ATmega88"．
	
	ATmega88用のバイナリ作成は，
	とりあえずC言語とWinAVRで動作を確認してから，
	アセンブリ言語と内蔵アセンブラに切り替える．
	
	ユーザプログラムの保存形式はxml

	<ここから編集中>
		[xmlの書式]

		<status name count caption image>
			<case name caption />
		</status>
		<action name count caption image code>
			<procedure name caption />
		</action>

		[xmlからコードをはき出すまでの手順]

		(1) xmlファイルの整合性をチェック
		(2) status*imageから画像を取得
		(3) 画像を分割してimagelistにする．
		    コンテキストメニューにstatus>case*captionを並べて，
		    状態（画像）を切り替えられるタイルを作る．
		    コンテキストメニューを出せるか否かのプロパティを用意する
		(4) action*imageから画像を取得
		    コンテキストメニューにaction>procedure*captionを並べて，
		    状態（画像）を切り替えられるタイルを作る．
		    コンテキストメニューを出せるか否かのプロパティを用意する
		(5)
	<ここまで編集中>

●日記
	2009年8月20日
		久しぶりにいじる時間ができた．
		
		「どうせロボットのハードウェアに依存するのだから」と，
		あまり計画を建てずに，さっさと作ろうと思っていたのだけれど，
		早くも破綻しそう．先輩からも苦言をいただく始末．
		
		そういうことで，全体的に構造を見直すことにした．
		
	
	2009年8月16日
		メインウィンドウのUIはだいたいできた．
		完成度は15%くらいか．
		次は細かい画像素材を作ることにしよう．
	
	2009年8月15日
		よくわからないまま，
		Google CodeのProject Hostingサービスと，
		Tortoise SVNを利用して，Subversionの環境を構築する．
		
		表層的な仕様と技術的な仕様をこのファイルにて文書化
		技術的な仕様には，まだまだ書き足す予定．

